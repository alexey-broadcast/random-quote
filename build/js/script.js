"use strict";$(window).load(function(){$(".loader-background").fadeOut(500)}),$(document).ready(function(){function t(t){return $.when(h.fadeTo(s,+t),f.fadeTo(s,+t))}function n(t,n){t=t||l.text,n=n||l.author,h.text(t),f.text(n)}function e(){var t=h.text(),e=f.text();n();var o=h.outerHeight()+f.outerHeight();return n(t,e),o}function o(){var t="http://api.forismatic.com/api/1.0/?",n=$.param({method:"getQuote",format:"jsonp",lang:"en"}),e=t+n+"&jsonp=?";return $.getJSON(e)}function i(){o().success(function(t){l.link=t.quoteLink,l.author=t.quoteAuthor?t.quoteAuthor.trim():"Unknown",l.text=t.quoteText.trim(),u()}).fail(i)}function u(){var o=e();t(!1).done(function(){return c.animate({height:o},s).promise().done(function(){n(),t(!0)})})}function r(){c.height(h.outerHeight()+f.outerHeight())}function a(){var t="https://twitter.com/intent/tweet?text=",n="menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=600,height=300",e=l.author+": "+l.text;e.length>140&&(e=e.slice(0,-(e.length-140+quoteLink.length+4))+"... "+quoteLink),e=encodeURIComponent(e),t+=e,window.open(t,"Twitter",n)}var c=$("#panel-main"),h=$("#panel-quote"),f=$("#panel-author"),l={text:"",author:"",link:""},s=200;$("#btn-next").on("click",i),$("#btn-tweet").on("click",a),$(window).resize(r),i()});